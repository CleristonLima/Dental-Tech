<h3>Lista de perfis</h3>

@if (ViewBag.ListaPerfis != null)
{
<table class="table table-bordered">
    <thead>
        <tr>
            <th>Código do perfil</th>
            <th>Descricao do perfil</th>
            <th>Sigla</th>
            <th>#</th>
            <th>#</th>
        </tr>
    </thead>

    <tbody>
            @{
                foreach (var item in (List<PerfilModel>)ViewBag.ListaPerfis)
                {
                        <tr>
                            
                            <td>@item.IdProfile</td>
                            <td>@item.NameProfile</td>
                            <td>@item.CodeProfile</td>
                            <td><button type="button" class="btn btn-warning" onclick="Editar(@item.IdProfile)">Editar</button></td>
                            <td><button type="button" class="btn btn-danger" onclick="Excluir(@item.IdProfile)">Excluir</button></td>
                        </tr>
                }
            }
    </tbody>

    </table>
    <br />

    <button class="btn btn-block btn-primary" type="button" onclick="Cadastrar()">Cadastrar Perfil</button>
}
else
{
    <p>Não foi possível carregar a lista de perfis. Verifique sua conexão com a internet e tente novamente.</p>
}
<br />

<script>
    function checkInternetConnection() {
        if (!navigator.onLine) {
            alert("Sem conexao com a internet. Verifique sua rede e tente novamente.");
        }
    }

    window.addEventListener('load', checkInternetConnection);
    window.addEventListener('offline', checkInternetConnection);

    document.addEventListener('DOMContentLoaded', function () {
        var errorMessage = '@TempData["ErrorLogin"]';
        if (errorMessage) {
            alert(errorMessage);
        }
    });

    function Cadastrar() {
        if (!navigator.onLine) {
            alert("Sem conexão com a internet. Verifique sua rede e tente novamente.");
        } else {
            window.location.href = "../Configuracoes/CadastroPerfil";
        }
    }

    function Editar(id) {
        if (!navigator.onLine) {
            alert("Sem conexão com a internet. Verifique sua rede e tente novamente.");
        } else {
            window.location.href = "../Configuracoes/CadastroPerfil/" + id;
        }
    }

    function Excluir(id) {
        if (!navigator.onLine) {
            alert("Sem conexão com a internet. Verifique sua rede e tente novamente.");
        } else {
            window.location.href = "../Configuracoes/Excluir/" + id;
        }
    }
</script>
    
